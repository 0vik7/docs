# Политики

При создании группы необходимо определить _политики_, которые описывают в каких зонах, как развертывать и масштабировать виртуальные машины в группе.

В CLI описание политик передается вместе с описанием [шаблона виртуальной машины](instance-group-instance-template.md) в виде YAML-файла при создании или изменении группы ВМ с помощью флага `--file`. Таким образом, удобно передать значение из нескольких строк. Подробнее читайте в разделе [[!TITLE]](../operations/create-fixed-group.md).

## Политика распределения {#allocation-policy}

При создании группы виртуальных машин можно выбрать в каких регионах, зонах доступности Яндекс.Облака будут размещаться виртуальные машины.

Регион — это определенное географическое расположение, в котором можно развертывать виртуальные машины. Каждый регион имеет одну или несколько зон. На данный момент доступен только один регион. [Подробнее о географии Облака](../../overview/concepts/geo-scope.md).

Регионы:

Регион | Зоны | Географическая привязка
----- | ----- | -----
`ru-central1` | `ru-central1-a`<br/>`ru-central1-b`<br/>`ru-central1-c` | Владимирская, Рязанская и Московская области.

Переместить виртуальные машины в другие зоны доступности невозможно, но вы можете [обновить группу](../operations/update.md) с новыми значениями зон.

Политика распределения определяется в YAML-файле, в ключе `allocation-policy`. Значением может быть список зон, определенных в ключе `zones`. Вы можете указывать любые доступные зоны, между которыми будут равномерно распределяться виртуальные машины в группе.

Пример записи в YAML-файле:

```
...
allocation_policy:
    zones:
        - zone_id: ru-central1-a
        - zone_id: ru-central1-b
        - zone_id: ru-central1-c
...
```

Ключи:

Ключ | Значение
----- | -----
`zones` | Список зон. Каждая зона задается в ключе `zone_id`, в виде пары `ключ:значение`.
`zone_id` | Идентификатор зоны.

## Политика развертывания {#deploy-policy}

При создании группы виртуальных машин можно выбрать, каким образом будут развертываться виртуальные машины в группе.

Политика развертывания представляет собой набор ограничений и определяется в YAML-файле, в ключе `deploy-policy`. Каждое ограничение задается в собственном ключе, в виде пары `ключ:значение`.

Пример записи в YAML-файле:

```
...
deploy-policy:
    max_creating: 10
    max_deleting: 10
    max_unavailable: 10
    max_expansion: 0
    starting_duration: 30
...
```

Ключи:

Ключ | Значение
----- | -----
`max_creating` | Максимальное количество создаваемых одновременно виртуальных машин.
`max_deleting` | Максимальное количество удаляемых одновременно виртуальных машин.
`max_unavailable` | Максимальное количество виртуальных машин в статусе `RUNNING`, на которое можно уменьшить целевой размер группы.
`max_expansion` | Максимальное количество виртуальных машин, на которое можно превысить целевой размер группы. Если ключ `max_unavailable` не указан или равен нулю, ключу `max_expansion` должно быть установлено ненулевое значение.
`starting_duration` | Время запуска виртуальной машины в группе.

## Политика масштабирования {#scale-policy}

При создании группы виртуальных машин можно выбрать каким образом увеличивать, уменьшать число виртуальных машин в группе ВМ для обработки текущей нагрузки на сервис.

На данный момент доступны группы виртуальных машин с [фиксированной](instance-group-types.md#fixed-scale) политикой масштабирования.

Политика масштабирования приложения определяется в ключе `scale_policy`.

### fixed_scale {#fixed-scale-policy}

Ключ `fixed_scale` определяет группу виртуальных машин фиксированного размера. Значением может быть только размер группы, определенный в ключе `size`. Вы можете указать любое количество виртуальных машин, необходимое для обработки текущей нагрузки на сервис.
Создавая группу, учитывайте [лимиты](../concepts/limits.md).

Пример записи в YAML-файле:

```
...
scale_policy:
    fixed_scale:
        size: 3
...
```

Ключи:

Ключ | Значение
----- | -----
`fixed_scale` | Группа виртуальных машин фиксированного размера.
`size` | Количество виртуальных машин в группе. Каждая группа может содержать не более 1000 виртуальных машин.
