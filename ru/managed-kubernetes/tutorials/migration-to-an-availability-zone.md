# Миграция ресурсов {{ managed-k8s-name }} в другую зону доступности


{% note info %}

В {{ managed-k8s-name }} поддержана миграция только [группы узлов](../concepts/index.md#node-group). Позднее появится возможность перенести также [мастер](../concepts/index.md#master) в другую зону доступности.

{% endnote %}

## Перед началом работы {#before-you-begin}

{% include [cli-install](../../_includes/cli-install.md) %}

{% include [default-catalogue](../../_includes/default-catalogue.md) %}


## Перенесите группу узлов в другую зону доступности {#transfer-a-node-group}

{% list tabs %}

- CLI

   1. Создайте подсеть в зоне доступности, в которую вы переносите группу узлов:

      ```bash
      yc vpc subnet create \
         --name <название_подсети> \
         --zone <зона_доступности> \
         --network-id <идентификатор_сети> \
         --range <CIDR_подсети>
      ```

      В команде укажите параметры подсети:

      * `--name` — название подсети.
      * `--zone` — зона доступности: `{{ region-id }}-a`, `{{ region-id }}-b` или `{{ region-id }}-d`.
      * `--network-id` — идентификатор сети, в которую входит новая подсеть.
      * `--range` — список IPv4-адресов, откуда или куда будет поступать трафик. Например, `10.0.0.0/22` или `192.168.0.0/16`. Адреса должны быть уникальными внутри сети. Минимальный размер подсети - `/28`, а максимальный размер подсети - `/16`. Поддерживается только IPv4.

   1. Перенесите группу узлов в другую зону доступности:

      ```bash
      {{ yc-k8s }} node-group update \
         --id <идентификатор_группы_узлов> \
         --location zone=<зона_доступности>,subnet-id=<идентификатор_подсети> \
         --network-interface subnets=<идентификатор_подсети>
      ```

      Команда пересоздает узлы внутри их группы в указанной зоне доступности и подсети. При пересоздании учитываются настройки развертывания — максимальное количество узлов, на которое разрешается увеличить или уменьшить размер группы по сравнению с исходным количеством узлов.

      В команде укажите значения параметров:

      * `--id` — идентификатор группы узлов, которую вы переносите в другую зону доступности.
      * `zone` — новая зона доступности.
      * `subnet-id` и `subnets` — идентификатор новой подсети, которую вы создали при миграции мастера.

{% endlist %}
