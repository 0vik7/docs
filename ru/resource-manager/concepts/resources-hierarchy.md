# Структура ресурсов Яндекс.Облака

Когда вы получаете доступ к Яндекс.Облаку, вам выделяется отдельное рабочее пространство — _облако_. В нем вы можете создать каталоги и поместить в них ресурсы для вашего проекта — виртуальные машины, диски и др. При создании ресурса указывается, в каком _каталоге_ он будет создан. В облаке можно создать много каталогов.

Владелец облака может управлять правами доступа к облаку и ресурсам в нем. Все ресурсы в облаке по умолчанию изолированы от пользователей вне облака. Права доступа на облако/каталог распространяются на все ресурсы внутри облака/каталога. Подробнее об этом в разделе [[!TITLE]](#access-rights-inheritance).

[!KEYREF service-name-short] предоставляет стандартную ресурсную модель, которая используется для управления доступом в большинстве сервисов Яндекс.Облака.
![](../../_assets/resource-structure.svg)
Не все ресурсы группируются в каталогах и наследуют права доступа от них. В зависимости от сервиса ресурсы могут иметь собственную иерархию наследования прав или не иметь ее вовсе. Например, при управлении ключами доступа для сервисного аккаунта проверяются права доступа на этот сервисный аккаунт. Некоторые ресурсы доступны всем пользователям, например зоны доступности и типы дисков. Подробнее об этом читайте в разделе «Безопасность и управление доступом» в руководстве к каждому сервису.


## Облако как ресурс Яндекс.Облака {#cloud}

_Облако_ — это изолированное пространство, в котором создаются каталоги.

По умолчанию доступ к ресурсам в облаке закрыт для всех, кроме пользователей, у которых есть роли в облаке. Пользователь, у которого нет никакой роли в облаке, не сможет просматривать и изменять ресурсы облака, даже если у него будут права доступа на сам ресурс. Чтобы иметь возможность управлять ресурсами в облаке, пользователю должна быть назначена роль владельца облака (`[!KEYREF roles-cloud-owner]`) или его участника (`[!KEYREF roles-cloud-member]`).

Облако можно сделать публичным, как и любой ресурс. Тогда для доступа к ресурсам в облаке не требуется быть участником облака (`[!KEYREF roles-cloud-member]`). Например, чтобы можно было предоставить публичный доступ на чтение ко всем ресурсам облака. Для этого достаточно назначить на это облако роль `[!KEYREF roles-viewer]` для субъекта `[!KEYREF subjects-allUsers]` . Тогда любой, даже без аутентификации в Яндекс.Облаке, через API сможет просматривать ресурсы в этом облаке, например следить за тем, какие виртуальные машины запущены, а какие отключены.

> [!NOTE]
> Облако не ограничивает доступ к самому ресурсу извне. Например, если у пользователя есть внешний IP-адрес виртуальной машины, он сможет посылать запросы на нее. Он сможет подключиться к виртуальной машине по SSH, если на ней будут загружены необходимые ключи.

При создании облака назначается владелец. Он может выдавать доступ к облаку другим пользователям, назначать им роли и отнимать их, в том числе роль владельца облака. Владелец сможет настраивать права доступа ко всем ресурсам облака.

У облака должен быть хотя бы один владелец. При попытке отнять эту роль у последнего владельца облака будет ошибка.

На данный момент вы можете быть владельцем только одного облака. При этом вы не можете создавать или изменять параметры облака самостоятельно, это будет сделано командой Яндекс.Облака.

#### См. также

- [[!TITLE]](../operations/cloud/set-access-bindings.md)


## Каталог как ресурс Яндекс.Облака {#folder}

_Каталог_ — это пространство, в котором создаются и группируются ресурсы Яндекс.Облака.

Как и каталоги в файловой системе, каталоги в Яндекс.Облаке упрощают управление ресурсами. Вы можете группировать ресурсы в каталоги по типу ресурса, по проекту, по отделу, который работает с этими ресурсами, или по любому другому признаку.

Каталоги позволяют управлять правами доступа ко всем ресурсам в каталоге. Допустим, у вас есть сотрудники, которые работают с виртуальными машинам. Вы можете создать каталог, в котором будут находиться только виртуальные машины и предоставить доступ к этому каталогу.

Каждый ресурс относится к какому-то каталогу. Вы можете посмотреть содержимое каталога в Консоли управления. Если вы хотите узнать, к какому каталогу относится ресурс, воспользуйтесь API или CLI, выполнив метод Get для этого ресурса.

> [!NOTE]
> Аналогично файловой системе, каталог это ресурс, в котором содержатся указатели на другие ресурсы системы. Однако при удалении каталога файловая система удаляет все файлы, содержащиеся в файловой системе. На данный момент, если удалить каталог в Яндекс.Облаке, связанные с этим каталогом ресурсы не будут удалены автоматически. При этом, управлять этими ресурсами будет невозможно. Для помощи в удалении ресурсов обратитесь в техническую поддержку.

На данный момент каталоги не могут содержать вложенные каталоги.

#### См. также

- [[!TITLE]](../operations/folder/create.md)
- [[!TITLE]](../operations/folder/set-access-bindings.md)


## Наследование прав доступа {#access-rights-inheritance}

Когда пользователь (субъект) выполняет какую-либо операцию с ресурсом, сервис Yandex Identity and Access Management (IAM) проверяет наличие необходимых разрешений у пользователя на этот ресурс. Разрешения на ресурс наследуются от каталога и облака.

> [!NOTE]
> При операциях с ресурсами внутри облака (каталоги, виртуальные машины, диски и др.) еще проверяется участие в этом облаке. Исключение — случаи, когда ресурс или облако публичное, то есть на этот ресурс назначена роль для субъекта `[!KEYREF subjects-allUsers]` или `[!KEYREF subjects-allAuthenticatedUsers]`. Тогда участие в облаке не проверяется.

Например, в облаке `skynet` в каталоге `robots` созданы сервисные аккаунты `t-800` и `t-1000`.

Пользователь с ролью владельца (`[!KEYREF roles-cloud-owner]`) в облаке `skynet`будет обладать полным доступом ко всем каталогам и ресурсам облака, даже если ему не назначено роли на эти ресурсы. Пользователь, который является участником облака (`[!KEYREF roles-cloud-member]`) и не имеет других ролей в облаке и его ресурсах, не сможет выполнять никаких операций в этом облаке. Но этому пользователю можно назначать другие роли, чтобы предоставить ему доступ.

Помимо имеющихся разрешений на ресурс наследуются разрешения от ресурса верхнего уровня согласно этой иерархии:

Облако → Каталог → Ресурс.

Например, если пользователю на облако `skynet` назначены роли `[!KEYREF roles-cloud-member]` и `[!KEYREF roles-viewer]`, то он сможет посмотреть список всех каталогов в облаке и их содержимое, потому что у он обладает разрешениями из роли `[!KEYREF roles-viewer]` на все ресурсы в этом облаке. Если пользователю назначить роль `[!KEYREF roles-editor]` по отношению к `t-800`, то он сможет управлять `t-800`, но не сможет управлять `t-1000`. А если пользователю назначить роль `[!KEYREF roles-admin]` в каталоге `robots`, то он получит разрешения администратора на управление каталогом и всеми ресурсами в нем, в том числе `t-1000`.

Для некоторых ресурсов нельзя задать права доступа, например для виртуальных машин или дисков. Для них тоже наследуются права согласно этой иерархии.

Например, при попытке получить информацию о виртуальной машине, IAM проверит права доступа на каталог, в котором лежит эта виртуальная машина. Если для каталога тоже не заданы права доступа, то IAM проверит, что у субъекта есть необходимые права доступа в этом облаке.

