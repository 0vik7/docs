# Аутентифицироваться в [!KEYREF container-registry-short-name]

Перед тем как начать работу с [!KEYREF container-registry-short-name] через Docker CLI, необходимо пройти аутентификацию.

Узнайте, как: 

- [Выбрать подходящий способ аутентификации](#method)
- [Аутентифицироваться с помощью OAuth-токена](#oauth)
- [Аутентифицироваться с помощью IAM-токена](#iam)

## Способы аутентификации {#method}

Есть несколько способов настроить аутентификацию, при этом стоит учесть, что у разных токенов разный срок жизни: 

- через OAuth-токен (срок жизни **год**);
- через IAM-токен (срок жизни **12 часов**).

Если вы не используете хранилище ключей, то можете положить конфигурационный файл на виртуальную машину. В таком случае, 
при работе с Docker CLI с этой машины, вам не придется проходить аутентификацию.

> [!IMPORTANT]
>
> Внимание! Стоит с осторожностью относиться к распространению файлов с ключами — любой, кто имеет доступ на вашу виртуальную
> машину, сможет выполнять команды в Docker CLI от вашего имени.

После того, как вы выбрали способ аутентификации, перейдем непосредственно к выполнению команды.

> [!NOTE]
>
> Необходимая роль на каталог — `viewer`. Подробнее про роли читайте в разделе [[!TITLE]](../security/index.md).

---

**[!TAB CLI]**

> [!IMPORTANT]
>    
> Не забудьте после всех параметров указать адрес для аутентификации `container-registry.cloud.yandex.net`, иначе 
> запрос пойдет в сервис по умолчанию — [Docker Hub](https://hub.docker.com).

Выполните в командной строке:
    
```
$ docker login \
--username <тип токена> \
--password <токен> \
container-registry.cloud.yandex.net
```

- В параметр `username` передается тип токена `<тип токена>`. Допустимые значения: `oauth` или `iam`. 
- В параметр `password` передается сам токен. 
        
Для обычного пользователя проще всего использовать OAuth-токен, для сервисных аккаунтов необходим IAM-токен.

---

## Аутентификация с помощью OAuth-токена {#oauth}

Если у вас еще нет OAuth-токена, получите его по [ссылке](https://oauth.yandex.ru/authorize?response_type=token&client_id=1a6990aa636648e9b2ef855fa7bec2fb).

---

**[!TAB CLI]**

Выполните команду: 

```
$ docker login \
--username oauth \
--password <OAuth-токен> \
container-registry.cloud.yandex.net
```

---

## Аутентификация с помощью IAM-токена {#iam}

---

**[!TAB CLI]**

1. Если у вас еще нет IAM-токена, получите его командой:
    
    ```
    yc iam create-token
    ```
    
1. Для аутентификации выполните команду: 
    
    ```
    $ docker login \
    --username iam \
    --password <IAM-токен> \
    container-registry.cloud.yandex.net
    ```

---
