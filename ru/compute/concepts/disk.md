# Диски

_Диск_ — это виртуальный аналог физических накопителей, таких как SSD и HDD.

Диски предназначены для хранения данных и подключаются к виртуальным машинам для работы с ними. При отключении диска данные сохраняются.

Каждый диск находится в одной из зон доступности и [реплицируется](#backup) внутри нее, что обеспечивает сохранность данных. В другие зоны диски не реплицируются.

## Диск как ресурс Яндекс.Облака {#disk-as-resource}

Диск создается внутри каталога и наследует права доступа к нему.

Диск занимает место в хранилище, которое дополнительно оплачивается. Подробнее читайте в разделе [{#T}](../pricing.md). Размер диска указывается при создании нового диска. Именно этот объем подлежит оплате.

Если диск создан из снимка или из образа, в информации о диске содержится идентификатор ресурса-источника. Помимо этого от ресурса-источника наследуется идентификаторы лицензий (`product_ids`), которые используются при расчете стоимости использования диска.

## Типы дисков {#disks_types}

В Яндекс.Облаке доступно два типа дисков:

- Сетевой SSD диск (`network-ssd`) — быстрый сетевой диск, сетевое блочное хранилище на SSD-накопителе. 
- Сетевой HDD диск (`network-hdd`) — стандартный сетевой диск, сетевое блочное хранилище на HDD-накопителе.

Зона доступности влияет на то, какие типы дисков можно создать в этой зоне.

## Подключение и отключение дисков {#attach-detach}

Каждый диск можно подключить только к одной виртуальной машине. Диск и виртуальная машина должны находиться в одной зоне доступности.

К виртуальной машине необходимо подключить загрузочный диск, а также можно подключить дополнительные диски.

{% include [attach-empty-disk](../_includes_service/attach-empty-disk.md) %}

При выборе диска для подключении к виртуальной машине можно указать, должен ли быть удален диск при удалении виртуальной машины. Это можно выбрать как при создании виртуальной машины, при изменении и при подключении нового диска к ней.

Если к виртуальной машине были подключены ранее созданные диски, то при удалении виртуальной машины они будут отключены. Данные на диске при этом сохраняются, в дальнейшем можно подключить диск к другой виртуальной машине.

Если вы хотите, чтобы диск был удален вместе с виртуальной машиной, это необходимо указать в одной из операций: при создании виртуальной машины, при изменении или при подключении диска к ней. Такие диски будут удалены при удалении виртуальной машины.

**Смотрите также**

- Узнайте как [{#T}](../operations/vm-control/vm-attach-disk.md).
- Узнайте как [{#T}](../operations/vm-control/vm-detach-disk.md).

## Резервное копирование {#backup}

Каждый диск автоматически реплицируется внутри своей зоны доступности.

Вы также можете создавать снимки дисков с целью резервного копирования. Снимок диска автоматически реплицируется в несколько зон доступности. Это позволяет сменить зону доступности, сохранив при этом все данные диска.

Если необходимо часто создавать диск из его резервной копии, вы можете создать образ этого диска, тогда восстановление будет быстрее. Например, если вы создали загрузочный диск вашей операционной системы и хотите устанавливать его на другие виртуальные машины. Образ диска тоже автоматически реплицируется в несколько зон доступности.

## Операции чтения и записи {#rw}

Операции чтения и записи имеют ограничения для дисков и блоков размещения. Блок размещения (allocation unit) — единица выделения дискового пространства, в ГБ. Величина блока размещения зависит от [типа диска](../concepts/limits.md#limits-disks).

Операции чтения и записи имеют предельные возможные значения по следующим параметрам:

* Максимальное значение IOPS — максимальное количество операций чтения и записи, выполняемых диском в секунду.
* Максимальная пропускная способность (bandwidth) — суммарное количество байт, которые можно прочитать с диска или записать на диск в секунду.

Фактическое значение IOPS зависит как от характеристик диска, так и от совокупного значения пропускной способности и размера запроса в байтах. IOPS, обеспечиваемый диском, определяется по формуле:

![image](../../_assets/compute/iops.svg)

Подробнее про максимально допустимые значения IOPS и пропускной способности читайте в разделе [Квоты и лимиты](../concepts/limits.md#limits-disks).

### Производительность дисков {#performance}

Чтобы получить максимальные значения IOPS, рекомендуется делать чтения и записи, не превышающие 4 КБ. Сетевые SSD-диски предоставляют существенно большие значения IOPS на чтение, а также меньшие значения времени обработки запроса.

Чтобы получить максимальные значения пропускной способности, рекомендуется делать чтения и записи размером 4 МБ.

Производительность диска зависит от его объема — чем выше количество блоков размещения, тем выше значения IOPS и пропускной способности.

Для HDD-дисков небольшого размера предусмотрен механизм увеличения характеристик до уровня дисков размером 1 ТБ на период повышенной нагрузки. Работая на [базовом уровне производительности](../concepts/limits.md#limits-disks) в течение 12 часов, небольшой диск накапливает "кредиты на операции", которые будут потрачены автоматически при увеличении нагрузки (например, при старте виртуальной машины). Небольшие HDD-диски могут работать с увеличенными характеристиками около 30 минут в день. "Кредиты на операции" могут быть потрачены как за один раз, так и небольшими промежутками.