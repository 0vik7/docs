# Создание снимка на основе диска в Яндекс.Облаке

_Снимок диска_ — это копия файловой системы диска на определенный момент времени.

## Подготовка к созданию снимка диска {#prepare}

Обратите внимание, что снимок содержит только те данные, которые записаны на диск в момент создания снимка. Если диск подключен к работающей виртуальной машине, то кэш приложений и операционной системы не попадет в снимок.

Чтобы обеспечить целостность данных снимка, используйте один из следующих способов:

- Остановите виртуальную машину (см. раздел [[!TITLE]](../vm-control/vm-stop-and-start.md#stop)) и дождитесь, когда ее статус изменится на `STOPPED`.
- (Для Linux-систем) Выполните запись кэша на диск в приложениях.
    Остановите все операции записи на диск в приложениях.
    Выполните команду `sync` для записи кэша операционной системы на диск.
- (Для Linux-систем) Остановите все операции записи на диск в приложениях.
    Выполните команду `fsfreeze -f` для <q>заморозки</q> файловой системы.


Создание снимка выполняется асинхронно. Возобновить запись на диск можно сразу после команды создания снимка, не дожидаясь завершения создания снимка.


## Создание снимка {#create}

---

**[!TAB Консоль управления]**

1. В консоли управления выберите каталог, в котором находится диск.
2. Нажмите плитку **Yandex Compute Cloud**.
3. На странице **Виртуальные машины** перейдите на вкладку **Диски**.
4. В строке с диском нажмите кнопку ![](../../../_assets/dots.png) и выберите в меню команду **Создать снимок**.
5. Введите имя снимка.
    Имя должно быть уникальным в рамках каталога. Имя может содержать строчные буквы латинского алфавита, цифры и дефисы. Первый символ должен быть буквой. Последний символ не должен быть дефисом. Максимальная длина имени — 63 символа.
6. Если требуется, укажите произвольное текстовое описание снимка.
7. Нажмите кнопку **Создать снимок**.

**[!TAB CLI]**

1. Посмотрите описание команд CLI для создания снимков:

    ```
    yc compute snapshot create --help
    ```

2. Выберите диск, снимок которого необходимо создать. Получить список всех дисков в каталоге, указанном в вашем профиле CLI можно с помощью команды:

    ```
    yc compute disk list
    
    +----------------------+------------+-------------+---------------+--------+----------------------+
    |          ID          |    NAME    |    SIZE     |     ZONE      | STATUS |     DESCRIPTION      |
    +----------------------+------------+-------------+---------------+--------+----------------------+
    | fhm53hnjmvplsn5r0633 |            | 13958643712 | ru-central1-a | READY  |                      |
    | fhmc3pdo4l7uqf8hq0ad |            | 42949672960 | ru-central1-a | READY  |                      |
    +----------------------+------------+-------------+---------------+--------+----------------------+
    ```

3. Создайте снимок в каталоге, указанном в вашем профиле CLI:

    ```
    yc compute snapshot create \
        --name my-yc-snapshot-fhm53 \
        --description "my first snapshot via yc" \
        --disk-id fhm53hnjmvplsn5r0633
    ```

    Данная команда создаст снимок диска с именем `my-yc-snapshot-fhm53` и описанием `my first snapshot via yc`.

    [!INCLUDE [name-format](../../../_includes/name-format.md)]

---

Создание снимка выполняется асинхронно. Снимок создается немедленно после команды создания и получает статус `CREATING`. С этого момента можно возобновить запись на диск, операции с диском не повлияют на данные в снимке.

Когда создание снимка завершено, статус снимка изменится на `READY`. С этого момента снимок можно использовать для создания образов, наполнения дисков и др.

