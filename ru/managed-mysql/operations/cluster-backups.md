# Управление резервными копиями

Вы можете создавать резервные копии и восстанавливать кластеры из имеющихся резервных копий.


## Восстановить кластер из резервной копии {#restore}

Восстанавливая кластер из резервной копии, вы создаете новый кластер с данными из резервной копии. Если в каталоге не хватает [ресурсов](../concepts/limits.md) для создания такого кластера, восстановиться из резервной копии не получится.

Для нового кластера необходимо задать все параметры, обязательные при создании, кроме типа кластера (резервную копию [!KEYREF CH] не получится восстановить как кластер [!KEYREF MY]).

---

**[!TAB Консоль управления]**

1. Перейдите на страницу каталога и нажмите плитку **[!KEYREF mmy-name]**.
1. Нажмите на имя нужного кластера и выберите вкладку **Резервные копии**.
1. Нажмите значок ![image](../../_assets/dots.svg) для нужной резервной копии, затем нажмите **Восстановить кластер**.

**[!TAB CLI]**

[!INCLUDE [cli-install](../../_includes/cli-install.md)]

[!INCLUDE [default-catalogue](../../_includes/default-catalogue.md)]

Чтобы восстановить кластер из резервной копии:

1. Посмотрите описание команды CLI для восстановления кластера [!KEYREF MY]:

    ```
    $ [!KEYREF yc-mdb-my] cluster restore --help
    ```

1. Получите список доступных резервных копий [!KEYREF MY]-кластеров:

    ```
    $ [!KEYREF yc-mdb-my] backup list
    
    +--------------------------+----------------------+----------------------+----------------------+
    |            ID            |      CREATED AT      |  SOURCE CLUSTER ID   |      STARTED AT      |
    +--------------------------+----------------------+----------------------+----------------------+
    | c9qlk4v13uq79r9cgcku:... | 2018-11-02T10:08:38Z | c9qlk4v13uq79r9cgcku | 2018-11-02T10:08:37Z |
    | ...                                                                                           |                          |
    +--------------------------+----------------------+----------------------+----------------------+
    ```
    
    Вы можете восстановить [!KEYREF MY]-кластер на любой момент после создания резервной копии (время в столбце `CREATED AT`). 

1. Запросите создание кластера из резервной копии:

    ```
    $ [!KEYREF yc-mdb-my] cluster restore \
           --backup-id c9qlk4v13uq79r9cgcku:base_000000010000000000000002 \
           --time 2018-11-02T10:09:38Z \
           --name mynewpg \
           --environment=PRODUCTION \
           --network-name default-net \
           --host zone-id=ru-central1-c,subnet-id=b0rcctk2rvtr8efcch63 \
           --disk-size 20 \
           --disk-type network-nvme \
           --resource-preset s1.nano
    ```

    В результате будет создан [!KEYREF MY]-кластер со следующими характеристиками:
    
    - С именем `mynewpg`.
    - В окружении `PRODUCTION`.
    - В сети `default-net`.
    - С одним хостом класса `s1.nano` в подсети `b0rcctk2rvtr8efcch63`, в зоне доступности `ru-central1-c`.
    - С базами данных и пользователями из резервной копии.
    - С сетевым SSD-хранилищем объемом 20 ГБ.

---


## Создать резервную копию {#create-backup}

---

**[!TAB Консоль управления]**

1. Перейдите на страницу каталога и нажмите плитку **[!KEYREF mmy-name]**.
1. Нажмите на имя нужного кластера и выберите вкладку **Резервные копии**.
1. Нажмите кнопку **Создать резервную копию**.

---


## Получить список резервных копий {#list-backups}

---

**[!TAB Консоль управления]**

1. Перейдите на страницу каталога и нажмите плитку **[!KEYREF mmy-name]**.
1. Нажмите на имя нужного кластера и выберите вкладку **Резервные копии**.

---


## Получить информацию о резервной копии {#get-backup}

---

**[!TAB Консоль управления]**

1. Перейдите на страницу каталога и нажмите плитку **[!KEYREF mmy-name]**.
1. Нажмите на имя нужного кластера и выберите вкладку **Резервные копии**.

---
