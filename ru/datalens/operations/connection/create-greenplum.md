---
title: "Инструкция по созданию подключения к {{ GP }} в {{ datalens-full-name }}"
description: "Из статьи вы узнаете, как подключиться к {{ GP }} в {{ datalens-full-name }}."
---

# Создание подключения к {{ GP }}

{% include [connection-note](../../../_includes/datalens/datalens-connection-note.md) %}

## Подключение к {{ GP }} {#greenplum-connection}

Чтобы создать подключение к {{ GP }}:


{% include [datalens-workbooks-collections-note](../../../_includes/datalens/operations/datalens-workbooks-collections-note.md) %}



1. Перейдите на [страницу подключений]({{ link-datalens-main }}/connections).


1. Нажмите кнопку **Создать подключение**.
1. Выберите подключение **Greenplum**.


1. Выберите тип подключения:

    {% list tabs %}

    - Выбрать в каталоге

      {% note info %}

      Доступны только базы данных в текущей организации.
      Чтобы подключиться к базе данных из другой организации, используйте тип подключения **Указать вручную** и убедитесь, что у базы данных включен [публичный доступ](../../../managed-greenplum/concepts/network.md#public-access-to-a-host).

      {% endnote %}

      Укажите параметры подключения для БД {{ mgp-name }}, доступной в {{ yandex-cloud }}:

      * **Кластер**. Укажите кластер из списка доступных кластеров {{ GP }}. В настройках кластера должна быть активирована опция **Доступ из {{ datalens-short-name }}**. Если у вас нет доступного кластера, нажмите кнопку **Создать новый**.

        {% note info %}

          В списке кластеров отображаются кластеры {{ GP }}:

           * с правами доступа для пользователя создающего подключение;
           * созданные в том же каталоге, что и экземпляр {{ datalens-short-name }}. 

        {% endnote %} 

      * **Имя хоста**. Выберите имя хоста из списка доступных в кластере {{ GP }}. Вы можете выбрать несколько хостов. Если к первому хосту подключиться не получится, {{ datalens-short-name }} выберет следующий из списка. 
      * **Порт**. Укажите порт подключения к {{ GP }}. Порт по умолчанию — {{ port-mgp }}.
      * **Путь к базе данных**. Укажите имя подключаемой базы данных.
      * **Имя пользователя**. Укажите имя пользователя для подключения к {{ GP }}. 
      * **Пароль**. Укажите пароль для пользователя.
      * **Время жизни кеша в секундах**. Укажите время жизни кеша или оставьте значение по умолчанию. Рекомендованное значение — 300 секунд (5 минут).
      * **Уровень доступа SQL запросов**. Позволяет использовать произвольный SQL-запрос для [формирования датасета](../../concepts/dataset/settings.md#sql-request-in-datatset).

    - Указать вручную

      {% note info %}

      Работа с управляемыми базами данных возможна, только если включен [публичный доступ](../../../managed-greenplum/concepts/network.md#public-access-to-a-host) к ним.
      Чтобы подключиться к управляемой базе данных без публичного доступа, используйте тип подключения **Выбрать в каталоге**.

      {% endnote %}

      Укажите параметры подключения для внешней БД {{ GP }}:

      * **Имя хоста**. Укажите путь до хоста-мастера или IP-адрес хоста-мастера {{ GP }}. Вы можете указать несколько хостов через запятую. Если к первому хосту подключиться не получится, {{ datalens-short-name }} выберет следующий из списка. 
      * **Порт**. Укажите порт подключения к {{ GP }}. Порт по умолчанию — 5432.
      * **Путь к базе данных**. Укажите имя подключаемой базы данных.
      * **Имя пользователя**. Укажите имя пользователя для подключения к {{ GP }}.
      * **Пароль**. Укажите пароль для пользователя.
      * **Время жизни кеша в секундах**. Укажите время жизни кеша или оставьте значение по умолчанию. Рекомендованное значение — 300 секунд (5 минут).
      * **Уровень доступа SQL запросов**. Позволяет использовать произвольный SQL-запрос для [формирования датасета](../../concepts/dataset/settings.md#sql-request-in-datatset).

    {% endlist %}



1. Нажмите кнопку **Создать подключение**.
1. Укажите название подключения и нажмите кнопку **Создать**.

{% include [datalens-check-host](../../../_includes/datalens/operations/datalens-check-host.md) %}

## Дополнительные настройки {#additional-settings}

{% include [datalens-db-connection-export-settings](../../../_includes/datalens/operations/datalens-db-connection-export-settings.md) %}
