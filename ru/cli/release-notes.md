# Релизы YC CLI

## Версия 0.31.0 (01.07.19) {#latest-release}

#### Изменения в CLI {#cli} 

**Улучшено**

- При использовании CLI на виртуальной машине, запущенной от имени сервисного аккаунта, по умолчанию CLI будет авторизовываться от имени этого сервисного аккаунта.

**Исправлено**
    
- Попытка получить ресурс, указав его уникальный идентификатор, завершалась с ошибкой, если в конфигурации CLI не был задан параметр `folder-id`.

- Попытка получить каталог, указав его уникальный идентификатор, завершалась с ошибкой, если у пользователя не было роли `viewer` на каталог в Облаке.

- Команда `yc init` завершалась с ошибкой, если у пользователя не было роли `viewer` в Облаке.

### Изменения в сервисах Облака {#services}

#### {{ load-balancer-name }} {#load-balancer}

- Команды `$ yc load-balancer network-load-balancer create` и `$ yc load-balancer network-load-balancer update`. 

    Для флага `--listener`  появилась возможность задать параметр `target-port`, позволяющий настроить NAT так, чтобы целевые ресурсы принимали трафик на порту, отличном от порта `listener`.

#### Сервисы управляемых баз данных {#managed-db}

**{{ mch-name }}**

- Команды `$ yc managed-clickhouse user create` и `$ yc managed-clickhouse user update`. 

    Добавлен флаг `--settings`, позволяющий задать пользовательские настройки.

## Предыдущие релизы {#previous-releases}

### Версия 0.30.0 (18.06.19) {#version0.30.0}

#### Изменения в сервисах Облака {#services}

#### {{ compute-name }} {#compute}

- Команда `$ yc compute instance update`.

    Добавлены флаги `--service-account-id` и `--service-account-name`, позволяющие добавить или изменить сервисный аккаунт для существующей виртуальной машины.

- Команда `$ yc compute instance create`.

    Изменено количество ядер, используемое по умолчанию при создании виртуальной машины с платформой Intel Cascade Lake (`standard-v2`). Теперь `cores: 2`.

#### {{ managed-k8s-name }} {#k8s}

- Команда `$ yc managed-kubernetes cluster update`.

    Добавлен флаг `--default-gateway-v4-address`, позволяющий обновить адрес шлюза для существующего {{ k8s }} кластера.

### Версия 0.29.0 (11.06.19) {#version0.29.0}

- Небольшие исправления и обновления.

### Версия 0.28.0 (05.06.19) {#version0.28.0}

#### Изменения в CLI {#cli}

- Добавлено автоматическое повторное подключение в случае недоступности любого ресурса, задействованного в выполнении команды. CLI повторит попытку соединения 5 раз, частота повтора вычисляется с помощью экспоненциального откладывания (exponential backoff).

#### Изменения в сервисах Облака {#services}

####  {{ compute-name }} {#compute-cloud}

- Команда `$ yc compute instance create`.

    Добавлен флаг `--gpus`, позволяющий указать количество графических процессоров у виртуальной машины.

#### Сервисы управляемых баз данных {#managed-db}

**Все сервисы управляемых БД**

- Команда `$ yc <имя базы данных> cluster get <имя кластера>`.

    Улучшен вывод информации о кластере.

- Команда `$ yc <имя базы данных> cluster create`.

    Добавлен флаг `--backup-window-start`, позволяющий при создании кластера настроить время его ежедневного резервного копирования.

**{{ mch-name }}**

- Команда `$ yc managed-clickhouse cluster add-zookeeper <имя кластера>`.

    Добавлена возможность добавлять хосты ZooKeeper.

- Команда: `$ yc managed-clickhouse shards add`.

    Изменена логика создания шардов:
    - Если не указан флаг `--host`, параметры для шарда копируются из самого старого шарда.
    - Если указан флаг `--host`, требуется введение всех параметров.
    - Если шарды отсутствуют, для создания шарда также требуется введение всех параметров.
