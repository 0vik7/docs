# Общие вопросы

#### Что такое [!KEYREF mmg-short-name]? {#what-is}

[!KEYREF mmg-short-name] — это сервис, который помогает вам создавать, эксплуатировать и масштабировать базы данных [!KEYREF MG] в облачной инфраструктуре.

С [!KEYREF mmg-short-name] вы можете:
- создавать базы данных с необходимыми параметрами производительности;
- масштабировать вычислительные мощности и выделенный объем хранилища для баз данных по мере необходимости;
- получать журналы работы баз данных.

[!KEYREF mmg-short-name] берет на себя трудоемкие задачи администрирования инфраструктуры [!KEYREF mmg-short-name]:
- предоставляет мониторинг потребляемых ресурсов;
- автоматически создает резервные копии баз данных;
- обеспечивает отказоустойчивость за счет автоматического переключения на резервные реплики;
- своевременно обновляет программное обеспечение СУБД.

Вы взаимодействуете с кластером БД в [!KEYREF mmg-short-name] как с обычной базой данных в вашей локальной инфраструктуре. Благодаря этому вы можете управлять внутренними настройками БД в соответствии с требованиями вашего приложения.


#### Какую часть работы по управлению и сопровождению баз данных берет на себя [!KEYREF mmg-short-name]? {#services}

При создании кластеров [!KEYREF mmg-short-name] выделяет ресурсы, устанавливает СУБД и создает базы данных.

Для созданных и запущенных баз данных [!KEYREF mmg-short-name] автоматически создает резервные копии, а также устанавливает исправления и обновления СУБД.

Также [!KEYREF mmg-short-name] обеспечивает репликацию данных между хостами БД (как внутри, так и между зонами доступности) и автоматически переключает нагрузку на резервную реплику в случае аварии.

#### Для каких задач стоит использовать [!KEYREF mmg-short-name], а для каких виртуальные машины с базами данных? {#mdb-advantage}

Яндекс.Облако предлагает два варианта работы с базами данных:

- [!KEYREF mmg-short-name] позволяет вам эксплуатировать шаблонные базы данных, не заботясь об администрировании.
- Виртуальные машины [!KEYREF compute-full-name] позволяют вам создавать и настраивать собственные базы данных. Такой подход позволяет использовать любые СУБД, подключаться к базам данных по SSH и так далее.


#### Что такое хост базы данных и кластер базы данных? {#what-is-cluster}

_Хост БД_ — это изолированная среда базы данных в облачной инфраструктуре с выделенными вычислительными ресурсами и зарезервированным объемом хранилища данных.

_Кластер БД_ — это один или более хостов БД, между которыми можно настроить репликацию.


#### Как начать работу с [!KEYREF mmg-short-name]? {#quickstart}

[!KEYREF mmg-short-name] доступен всем зарегистрированным пользователям Яндекс.Облака.

Чтобы создать кластер базы данных в [!KEYREF mmg-short-name], необходимо определиться с его характеристиками:

- [Класс хостов](../concepts/instance-types.md) (характеристики производительности — процессоры, память и т. п.).
- Объем хранилища (резервируется в полном объеме при создании кластера).
- Сеть, к которой будет подключен ваш кластер.
- Количество хостов для кластера и зона доступности для каждого хоста вы можете выбрать зону доступности.

Подробные инструкции см. в разделе [[!TITLE]](../quickstart.md).


#### Сколько хостов БД может содержать кластер? {#how-many-hosts}

Для сетевого NBS-хранилища количество хостов в кластере ограничено только запрошенными вычислительными ресурсами и объемом хранилища для кластера.

Для хранилища на NVMe-дисках количество хостов ограничено при создании:

- для [!KEYREF PG]- и [!KEYREF MG]-кластеров можно создать не меньше 3 хостов;
- для [!KEYREF CH]-кластеров можно создать не меньше 2 хостов.

Однако после создания кластера хосты можно добавлять в рамках [доступных ресурсов](../concepts/limits.md).

#### Как получить доступ к запущенному хосту базы данных? {#db-access}

Вы можете подключаться к базам данных [!KEYREF mmg-short-name] способами, стандартными для СУБД.

[Подробнее о подключении к кластерам](../operations/connect.md).


#### Сколько кластеров можно создать в рамках одного облака? {#db-limit}

Технические и организационные ограничения MDB приведены в разделе [[!TITLE]](../concepts/limits.md).


#### Как происходит обслуживание кластеров БД? {#service-window}

Под обслуживанием в [!KEYREF mmg-short-name] понимается:

- автоматическая установка обновлений и исправлений СУБД для ваших хостов БД;
- изменение класса хостов и объема хранилища;
- другие сервисные работы [!KEYREF mmg-short-name].


#### Какую версию [!KEYREF MG] использует [!KEYREF mch-short-name]? {#dbms-version}

[!KEYREF mmg-short-name] поддерживает [!KEYREF MG] 3.6.


#### Что происходит, когда выпускается новая версия СУБД? {#new-version}

При выходе новых минорных версий программное обеспечение кластеров обновляется после короткого периода тестирования. Владельцы затронутых кластеров БД получают предварительное оповещение о сроках проведения работ и доступности баз данных.


#### Что происходит, когда версия СУБД становится неподдерживаемой (deprecated)? {#dbms-deprecated}

Через месяц после того, как версия СУБД становится неподдерживаемой, [!KEYREF mmg-short-name] автоматически оповещает владельцев кластеров БД, созданных с этой версией, по электронной почте.

Создание новых хостов с СУБД неподдерживаемых версий становится невозможным. Через 7 дней после оповещения для минорных версий и через 1 месяц для мажорных версий проводится автоматическое обновление кластеров БД до следующей поддерживаемой версии. Обновление неподдерживаемых мажорных версий происходит даже если у вас отключено автоматическое обновление.


#### Как рассчитывается стоимость потребления для хоста базы данных? {#db-cost}

В [!KEYREF mmg-short-name] стоимость потребления рассчитывается исходя из следующих параметров:

- Выбранный класс хостов.
- Объем хранилища, зарезервированного для хоста БД.
- Объем резервных копий кластера БД. Объем резервных копий, равный объему хранилища, не тарифицируется. Хранение резервных копий сверх этого объема оплачивается по [тарифам](../pricing.md).
- Количество часов работы хоста БД. Неполные часы округляются до целого значения. Стоимость часа работы для каждого класса хостов приведена в разделе [[!TITLE]](../pricing.md).


#### Как изменить вычислительные ресурсы и объем хранилища для кластера БД? {#resources-change}

Вы можете изменять вычислительные ресурсы и объем хранилища в консоли управления — просто выберите другой класс хостов для нужного кластера.

Характеристики кластера изменяются в течение 30 минут. В этот период также могут быть включены другие сервисные работы по кластеру, например, установка обновлений.


#### Включено ли резервное копирование хостов БД по умолчанию? {#default-backup}

Да, по умолчанию резервное копирование включено. Для [!KEYREF MG] полное резервное копирование выполняется один раз в сутки с возможностью восстановления до любой сохраненной резервной копии.

По умолчанию резервные копии хранятся 7 дней.

#### Когда выполняется резервное копирование? Доступен ли кластер БД во время резервного копирования? {#backup-window}

Окно резервного копирования — это интервал времени, в течение которого выполняется ежедневное полное резервное копирование кластера БД. Окно резервного копирования — 01:00−05:00 по московскому времени.

Во время окна резервного копирования кластеры остаются полностью доступными.

#### За какими метриками и процессами можно следить с помощью мониторинга? {#monitoring}

Для всех типов СУБД можно отслеживать:

- загрузку процессора, памяти, сети, дисков в абсолютных величинах;
- загрузку памяти, сети, дисков в процентах от установленных лимитов для класса хостов соответствующего кластера;
- объем данных кластера БД и остаток свободного места в хранилище данных.

Для всех хостов БД можно отслеживать метрики, специфические для типа соответствующей СУБД. Например для [!KEYREF MG] можно отслеживать:
- среднее время выполнения запроса;
- количество запросов в секунду;
- количество ошибок в журналах и т. д.

Мониторинг можно осуществлять с минимальной гранулярностью в 5 секунд.
