# Управление базами данных

{% if audience == "internal" %}

## Создать базу данных {#create-db}

1. Перейдите в [консоль управления](https://ydb.yandex-team.ru) и нажмите кнопку **Create database**.

    ![Create database](../_assets/db_ui_create_database_button.png)

1. Настройте параметры базы в диалоговом окне:

    1. Кластер (cluster). Доступен выбор однодатацентровых (`ydb-vla`, `ydb-sas`, `ydb-man`, `ydb-myt`) и многодатацетровых кластеров (`ydb-ru`, расположенный в датацентрах VLA-SAS-MYT, и `ydb-eu`, расположенный в датацентрах VLA-SAS-MAN).

    {% note important %}

    В текущей инсталляции {{ ydb-short-name }} доступен кластер `ydb-ru`, расположенный в датацентрах VLA-SAS-MYT.

    {% endnote %}

    1. **Аккаунт**. Если вы только начинаете работать с сервисом {{ ydb-short-name }} и аккаунта вашего проекта еще нет, заполните, [форму](https://st.yandex-team.ru/createTicket?template=1911&queue=KIKIMR) для создания аккаунта. Если вы хотите попробовать создать личную БД для тестирования, воспользуйтесь аккаунтом *home*.

    1. **Директория**. Выберите директорию из списка существующих директорий выбранного аккаунта или создайте новую. Если вы выбрали аккаунт *home*, автоматически будет создана директория с вашим именем пользователя. Название директории регистрозависимое, должно начинаться с латинской буквы, дальше допустимы буквы латинского алфавита, цифры, подчеркивание '_' и дефис '-'.

    1. **Имя**. На имя базы данных накладываются те же ограничния, что и на название директории.

    1. **Вычислительные ресурсы**. Тип и количество вычислительных ресурсов (compute units).

    1. **Политика распределения**. Политику распределения вычислительных ресурсов между датацентрами (distribution policy) для многодатацентровых кластеров. Возможные варианты:

        * *auto* — вычислительные ресурсы будут расположены в доступных датацентрах, в случае выхода из строя датацентра переедут в оставшиеся доступные датацентры;
        * *in one DC* — вычислительные ресурсы будут расположены в одном датацентре, в случае его выхода из строя переедут в другой датацентр, но также будут располагаться в пределах одного датацентра;
        * *uniform distribution* — вычислительные ресурсы равномерно распределены по датацентрам, в случае выхода из строя одного из датацентров, переезжают в оставшиеся датацентры.

    1. **Группы хранения**. Тип и количество групп хранения. Каждой группе хранения соответствует определенная схема хранения, влияющая на количество используемых дисков, модель отказа и коэффициент избыточности. Для однодатацентровых кластеров обычно используется схема ``block4-2``, при которой группа хранения расположена на 8 дисках в 8 стойках, переживает отказ любых двух дисков и дает избыточность с коэффицентом 1.5. В мультидатацентровых кластерах используется схема ``mirror3dc``, где в группе хранения задействовано 9 дисков, расположенных по 3 в трех датацентрах, выдерживает отказ датацентра и диска в любом другом датацентре, дает избыточность с коэффицентом 3. Группа хранения может состоять из накопителей, относящихся к одному из следующих типов: SATA HDD, SATA SSD.

    {% note important %}

    В текущей инсталляции {{ ydb-short-name }} доступены только SATA SSD накопители.

    {% endnote %}

1. Нажмите на кнопку **Create** для создания базы данных с указанными параметрами.

Пример формы создания базы данных:

![Create new database](../_assets/db_ui_create_new_database.png)

## Посмотреть список баз данных {#db-list}

Для просмотра списка баз данных зайдите на главную страницу [вeб-интерфейса](https://ydb.yandex-team.ru).
На странице появится список созданных БД. Для каждой базы указаны полное имя БД, расположение (кластер), количество зарезервированных под БД ресурсов и количество используемых ресурсов.

![List databases](../_assets/db_ui_list_databases.png)

## Создать базу данных требуемого размера {#create-custom-db}

В настоящее время создание БД отличающихся размером от доступного по умолчанию в интерфейсе, выполняется администратором системы.
Для изменения параметров создаваемой  БД следует заполнить [форму](https://st.yandex-team.ru/createTicket?template=2082&queue=YDBREQUESTS).

## Изменить параметры базы данных {#change-db-params}

В настоящее время изменение параметров БД выполняется администратором системы.
Для изменения параметров БД следует заполнить [форму](https://st.yandex-team.ru/createTicket?template=1918&queue=YDBREQUESTS).

## Удалить базу данных {#delete-db}

В настоящее время удаление БД выполняется администратором системы.
Для удаления БД следует заполнить [форму](https://st.yandex-team.ru/createTicket?template=1919&queue=YDBREQUESTS).

{% else if audience == "external" %}

## Создать базу данных {#create-db}

{% include [create-db-via-console](../../_includes/ydb/create-db-via-console.md) %}

## Подключиться к базе данных {#connect-to-db}

{% if audience == "internal" %}

Доступ к базам данных в {{ ydb-short-name }} осуществляется по протоколу gRPC. Сетевой адрес для соединения cо своей базой (database endpoint) можно узнать в [веб-интерфейсе](https://ydb.yandex-team.ru/) на вкладке **Info**.

![Database API Endpoint](../_assets/db_ui_info_cluster_api.png)

Для получения доступа следует с помощью [Puncher](https://puncher.yandex-team.ru) создать заявки на правила доступа по TCP к серверам в кластерах {{ ydb-short-name }} и устройствам, балансирующим к ним сетевые соединения.

## Доступ к кластеру ydb-ru {#access-to-ydb-ru}

В отдельных заявках укажите:

* адрес балансировщика: ydb-ru.yandex.net, протокол TCP, порт 2135;

![Puncher_request_form_4slb_sample](../_assets/puncher_request_4slb_form_ydb_ru.png)

* макрос: ```_C_YDB_RU_``` для баз данных в кластере `ydb-ru`, протокол TCP, диапазон портов 31000-32000.

![Puncher_request_form_sample](../_assets/puncher_request_form_ydb_ru.png)

## Доступ к кластеру ydb-ru-prestable {#access-to-ydb-ru-prestable}

В отдельных заявках укажите:

* адрес балансировщика: ydb-ru-prestable.yandex.net, протокол TCP, порт 2135;

![Puncher_request_form_4slb_sample](../_assets/puncher_request_4slb_form_ydb_ru_prestable.png)

* макрос: ```_C_YDB_RU_PRESTABLE_``` для баз данных в кластере ydb-ru, протокол TCP, диапазон портов 31000-32000.

![Puncher_request_form_sample](../_assets/puncher_request_form_ydb_ru_prestable.png)

{% else if audience == "external" %}

Доступ к базам данных в {{ ydb-short-name }} осуществляется по протоколу gRPC. Чтобы узнать эндпоинт для соединения с базой данных:

1. Перейдите на страницу **Базы данных** в консоли управления.
1. Кликните на имя базы данных, для которой необходимо получить эндпоинт. Откроется страница **Навигация**.
1. Перейдите на страницу **Обзор**. Эндпоинт базы данных указан в поле **Эндпоинты**.

{% endif %}

## Посмотреть список баз данных {#db-list}

Для просмотра списка баз данных зайдите на главную страницу консоли управления **Базы данных**.
На странице появится список созданных БД. Для каждой базы указаны полное имя БД и [статус ВМ](../../compute/concepts/vm-statuses.md).